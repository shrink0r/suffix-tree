#!/usr/bin/env php
<?php

use Shrink0r\SuffixTree\Builder\SuffixTreeBuilder;
use Shrink0r\SuffixTree\Renderer\GraphvizRenderer;

require dirname(__DIR__) . '/vendor/autoload.php';

if (count($argv) < 2) {
    return;
}

$tree_builder = new SuffixTreeBuilder;
$current_pattern = $argv[1];
do {
    $last_pattern = $current_pattern;
    $tree_builder = $tree_builder->build($current_pattern.'$');
    $current_pattern = trim($suffix_tree->findLongestRepetition());
} while (strlen($current_pattern) > 2);

echo "// Pattern is: ".(($last_pattern !== $argv[1])?$last_pattern:'')."\n";
